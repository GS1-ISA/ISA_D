...FFF..........                                                         [100%]
=================================== FAILURES ===================================
__________________ test_index_fr_fixture_builds_vector_index ___________________

tmp_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-179/test_index_fr_fixture_builds_v0')

    def test_index_fr_fixture_builds_vector_index(tmp_path: Path):
        fixture = Path(__file__).parent / "fixtures" / "federal_register_sample.json"
        storage = tmp_path / "research_index_fr.json"
>       n = index_fr_fixture(fixture, storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

scripts/research/tests/test_index_fr_integration.py:9:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

fixture_path = PosixPath('/Users/frisowempe/ISA_D/scripts/research/tests/fixtures/federal_register_sample.json')
storage_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-179/test_index_fr_fixture_builds_v0/research_index_fr.json')

    def index_fr_fixture(fixture_path: str | Path, storage_path: str | Path) -> int:
        """Load a Federal Register fixture JSON and write/update a VectorIndex storage file.

        Returns number of docs written.
        """
        _ensure_superapp_on_path()
>       from ISA_SuperApp.src.retrieval import VectorIndex  # type: ignore
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       ModuleNotFoundError: No module named 'ISA_SuperApp.src'

scripts/research/index_docs.py:88: ModuleNotFoundError
__________________ test_index_tr_fixture_builds_vector_index ___________________

tmp_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-179/test_index_tr_fixture_builds_v0')

    def test_index_tr_fixture_builds_vector_index(tmp_path: Path):
        # Use fixture JSON and a temp storage path
        fixture = Path(__file__).parent / "fixtures" / "w3c_tr_index.json"
        storage = tmp_path / "research_index.json"
>       n = index_tr_fixture(fixture, storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

scripts/research/tests/test_index_integration.py:10:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

fixture_path = PosixPath('/Users/frisowempe/ISA_D/scripts/research/tests/fixtures/w3c_tr_index.json')
storage_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-179/test_index_tr_fixture_builds_v0/research_index.json')

    def index_tr_fixture(fixture_path: str | Path, storage_path: str | Path) -> int:
        """Load a TR fixture JSON and write/update a VectorIndex storage file.

        Returns number of docs written.
        """
        _ensure_superapp_on_path()
>       from ISA_SuperApp.src.retrieval import VectorIndex  # type: ignore
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       ModuleNotFoundError: No module named 'ISA_SuperApp.src'

scripts/research/index_docs.py:56: ModuleNotFoundError
___________________________ test_kg_from_normalized ____________________________

tmp_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-179/test_kg_from_normalized0')

    def test_kg_from_normalized(tmp_path: Path):
        fixture = Path(__file__).parent / "fixtures" / "w3c_tr_index.json"
        data = _load_json(fixture)
        docs = _normalize_tr_entries(data)
        kg_path = tmp_path / "kg.json"
>       n = kg_from_normalized(docs, kg_path)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

scripts/research/tests/test_index_to_kg.py:11:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

docs = [('TR:WebAuthn Level 3', 'WebAuthn Level 3 (WD) — https://www.w3.org/TR/webauthn-3/ — 2025-08-01T00:00:00Z', {'date': ...0:00Z', {'date': '2025-07-15T00:00:00Z', 'source': 'w3c_tr', 'status': 'REC', 'url': 'https://www.w3.org/TR/webrtc/'})]
kg_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-179/test_kg_from_normalized0/kg.json')

    def kg_from_normalized(docs: list[tuple[str,str,dict]], kg_path: str | Path) -> int:
        """Write normalized docs as KG entities with provenance.

        Each doc becomes an entity with observations containing URL/status/date.
        """
        _ensure_superapp_on_path()
>       from ISA_SuperApp.src.memory_store import KnowledgeGraphMemory  # type: ignore
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       ModuleNotFoundError: No module named 'ISA_SuperApp.src'

scripts/research/index_docs.py:104: ModuleNotFoundError
=========================== short test summary info ============================
FAILED scripts/research/tests/test_index_fr_integration.py::test_index_fr_fixture_builds_vector_index
FAILED scripts/research/tests/test_index_integration.py::test_index_tr_fixture_builds_vector_index
FAILED scripts/research/tests/test_index_to_kg.py::test_kg_from_normalized - ...
3 failed, 13 passed in 0.47s
...FFF..........                                                         [100%]
=================================== FAILURES ===================================
__________________ test_index_fr_fixture_builds_vector_index ___________________

tmp_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-180/test_index_fr_fixture_builds_v0')

    def test_index_fr_fixture_builds_vector_index(tmp_path: Path):
        fixture = Path(__file__).parent / "fixtures" / "federal_register_sample.json"
        storage = tmp_path / "research_index_fr.json"
>       n = index_fr_fixture(fixture, storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

scripts/research/tests/test_index_fr_integration.py:9:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

fixture_path = PosixPath('/Users/frisowempe/ISA_D/scripts/research/tests/fixtures/federal_register_sample.json')
storage_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-180/test_index_fr_fixture_builds_v0/research_index_fr.json')

    def index_fr_fixture(fixture_path: str | Path, storage_path: str | Path) -> int:
        """Load a Federal Register fixture JSON and write/update a VectorIndex storage file.

        Returns number of docs written.
        """
        _ensure_superapp_on_path()
>       from ISA_SuperApp.src.retrieval import VectorIndex  # type: ignore
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       ModuleNotFoundError: No module named 'ISA_SuperApp.src'

scripts/research/index_docs.py:88: ModuleNotFoundError
__________________ test_index_tr_fixture_builds_vector_index ___________________

tmp_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-180/test_index_tr_fixture_builds_v0')

    def test_index_tr_fixture_builds_vector_index(tmp_path: Path):
        # Use fixture JSON and a temp storage path
        fixture = Path(__file__).parent / "fixtures" / "w3c_tr_index.json"
        storage = tmp_path / "research_index.json"
>       n = index_tr_fixture(fixture, storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

scripts/research/tests/test_index_integration.py:10:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

fixture_path = PosixPath('/Users/frisowempe/ISA_D/scripts/research/tests/fixtures/w3c_tr_index.json')
storage_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-180/test_index_tr_fixture_builds_v0/research_index.json')

    def index_tr_fixture(fixture_path: str | Path, storage_path: str | Path) -> int:
        """Load a TR fixture JSON and write/update a VectorIndex storage file.

        Returns number of docs written.
        """
        _ensure_superapp_on_path()
>       from ISA_SuperApp.src.retrieval import VectorIndex  # type: ignore
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       ModuleNotFoundError: No module named 'ISA_SuperApp.src'

scripts/research/index_docs.py:56: ModuleNotFoundError
___________________________ test_kg_from_normalized ____________________________

tmp_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-180/test_kg_from_normalized0')

    def test_kg_from_normalized(tmp_path: Path):
        fixture = Path(__file__).parent / "fixtures" / "w3c_tr_index.json"
        data = _load_json(fixture)
        docs = _normalize_tr_entries(data)
        kg_path = tmp_path / "kg.json"
>       n = kg_from_normalized(docs, kg_path)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

scripts/research/tests/test_index_to_kg.py:11:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

docs = [('TR:WebAuthn Level 3', 'WebAuthn Level 3 (WD) — https://www.w3.org/TR/webauthn-3/ — 2025-08-01T00:00:00Z', {'date': ...0:00Z', {'date': '2025-07-15T00:00:00Z', 'source': 'w3c_tr', 'status': 'REC', 'url': 'https://www.w3.org/TR/webrtc/'})]
kg_path = PosixPath('/private/var/folders/pf/l8k4fvrj7fgbhlnqpn7nhbc80000gn/T/pytest-of-frisowempe/pytest-180/test_kg_from_normalized0/kg.json')

    def kg_from_normalized(docs: list[tuple[str,str,dict]], kg_path: str | Path) -> int:
        """Write normalized docs as KG entities with provenance.

        Each doc becomes an entity with observations containing URL/status/date.
        """
        _ensure_superapp_on_path()
>       from ISA_SuperApp.src.memory_store import KnowledgeGraphMemory  # type: ignore
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       ModuleNotFoundError: No module named 'ISA_SuperApp.src'

scripts/research/index_docs.py:104: ModuleNotFoundError
=========================== short test summary info ============================
FAILED scripts/research/tests/test_index_fr_integration.py::test_index_fr_fixture_builds_vector_index
FAILED scripts/research/tests/test_index_integration.py::test_index_tr_fixture_builds_vector_index
FAILED scripts/research/tests/test_index_to_kg.py::test_kg_from_normalized - ...
3 failed, 13 passed in 0.48s
