#!/usr/bin/env python3
import os, json, sys
from src.integrations.figma_client import extract_file_key_from_url, fetch_file_json, generate_css_tokens, write_tokens_css
def main():
    key = os.getenv("FIGMA_FILE_KEY")
    url = os.getenv("FIGMA_FILE_URL")
    if not key and url: key = extract_file_key_from_url(url)
    if not key:
        print("No FIGMA_FILE_KEY or FIGMA_FILE_URL provided."); sys.exit(0)
    data = fetch_file_json(key); css = generate_css_tokens(data); out = "webui/tokens.css"
    write_tokens_css(out, css); print(f"Wrote tokens to {out}")
if __name__ == "__main__": main()
